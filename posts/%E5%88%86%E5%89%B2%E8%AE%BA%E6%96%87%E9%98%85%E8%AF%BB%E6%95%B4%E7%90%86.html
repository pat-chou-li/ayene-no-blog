<!DOCTYPE html><html lang="en" data-beasties-container><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg"><script>!function(){const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><style type="text/css">:root{color-scheme:light dark;--va-c-bg:#fff}html{background-color:var(--va-c-bg)}</style><script>const locale=localStorage.getItem("valaxy-locale")||"zh-CN";document.documentElement.setAttribute("lang",locale)</script><script type="module" async crossorigin src="/ayene-no-blog/assets/app.CZR6THSy.js"></script><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/framework.DmXNyegR.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/@vueuse/motion.Bf6_DV_X.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/vue-router.CDV2LZ_i.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/dayjs.BdcnXKr1.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/vue-i18n.DfFCechf.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/pinia.DvPpdoxl.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/nprogress.Bru8d7fl.js"><link rel="stylesheet" crossorigin href="/ayene-no-blog/assets/app.Dgo4sgoW.css"><link rel="stylesheet" crossorigin href="/ayene-no-blog/assets/group-icons.Bm1YPxXM.css"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/post.sr24ljMs.js"><link rel="stylesheet" href="/ayene-no-blog/assets/group-icons.Bm1YPxXM.css"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/分割论文阅读整理.CK7-hd27.js"><title>分割论文阅读整理 - ayane no blog</title><script id="check-mac-os" async>document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap"><meta property="og:locale:alternate" content="en"><meta name="description" content="我从来没有觉得学图形学开心过。"><meta property="og:description" content="我从来没有觉得学图形学开心过。"><meta property="og:locale" content="zh-CN"><meta property="og:site_name" content="ayane no blog"><meta property="og:title" content="分割论文阅读整理"><meta property="og:image" content="/favicon.svg"><meta property="og:type" content="website"><meta property="og:url" content="https://pat-chou-li.github.io/ayene-no-blog/"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><meta name="generator" content="Valaxy 0.26.10"><meta name="theme-color" content="#fff"><meta name="msapplication-TileColor" content="#fff"><meta name="twitter:card" content="summary_large_image"></head><body><div id="app" data-server-rendered="true"><!--[--><!--[--><!--[--><!----><!----><div class="yun-page-header-gradient" style="--gradient-from:161 196 253;--gradient-to:194 233 251"></div><!----><!----><!----><canvas class="fireworks"></canvas><!--[--><div class="yun-bg"></div><!--]--><div class="yun-page-loading" absolute left-0 right-0 bottom-0 top-0 flex justify="center" items-center z-10 bg="$va-c-bg" data-v-673bc094><div class="spinner" data-v-673bc094></div></div><a href="#" class="back-to-top yun-icon-btn bg-$va-c-bg-soft shadow-md"><div class="size-8" i-ri-arrow-up-s-line></div><svg class="progress-circle-container" viewBox="0 0 100 100"><circle stroke-dasharray="301.59289474462014 301.59289474462014" stroke-dashoffset="301.59289474462014" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="progress-circle" cx="50" cy="50" r="48" fill="none"/></svg></a><!-- TODO --><!-- <YunDock /> --><!--]--><!--[--><!--]--><!----><!--]--><!--[--><div flex="~" class="w-full m-auto justify-center items-start gap-4 mt-12 md:mt-24"><!--[--><!----><main class="yun-main lt-md:w-full" flex="~ center"><!--[--><div class="content w-full md:w-3xl lg:w-2xl xl:w-2xl 2xl:w-4xl" flex="~ col grow" p="lt-md:0"><div class="yun-card flex-center rounded-2 relative" flex="col" min-h="100px" bg="$va-c-bg-light" m="0" style><!----><!----><!--[--><div class="mt-8 mb-4"><!--[--><header class="post-header"><h1 p="2" text="2xl center" font="serif black" style="" class="post-title flex-center"><!----><span inline-flex class="leading-none">分割论文阅读整理</span></h1></header><!--]--></div><!--[--><!--[--><!--[--><!--[--><!----><!----><!----><div flex="~ center" text="sm" class="flex-col gap-2! post-meta gap-4"><div class="post-time flex items-center gap-4"><span class="posted-time inline-flex-center gap-1" title="发表于2024-06-20 00:00:00"><div class="inline-block" i-ri-calendar-line></div><time class="op-80">2024-06-20</time></span><!----></div><!--[--><!--]--><div class="inline-flex-center gap-4"><!----><!----></div></div><!--]--><div class="inline-flex mt-2" text="sm" py="1"><a href="/ayene-no-blog/categories?category=%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0" class="transition post-category inline-flex-center text-xs border-$va-c-divider" px-2 h="7" border rounded-full hover="bg-blue-500 text-white"><div m="x-1" inline-flex i-ri-folder-2-line></div><span>阅读笔记</span></a><span mx="2"></span><div class="post-tags inline-flex" items="center" gap="1" flex="wrap 1" justify="end"><!--[--><a href="/ayene-no-blog/tags/?tag=%E5%9B%BE%E5%BD%A2%E5%AD%A6" class="transition post-tag inline-flex-center text-xs border-$va-c-divider" px-2 h="7" rounded-full border hover="bg-blue-500 text-white"><span>图形学</span></a><a href="/ayene-no-blog/tags/?tag=NeRF" class="transition post-tag inline-flex-center text-xs border-$va-c-divider" px-2 h="7" rounded-full border hover="bg-blue-500 text-white"><span>NeRF</span></a><a href="/ayene-no-blog/tags/?tag=3DGS" class="transition post-tag inline-flex-center text-xs border-$va-c-divider" px-2 h="7" rounded-full border hover="bg-blue-500 text-white"><span>3DGS</span></a><a href="/ayene-no-blog/tags/?tag=3D%E5%88%86%E5%89%B2" class="transition post-tag inline-flex-center text-xs border-$va-c-divider" px-2 h="7" rounded-full border hover="bg-blue-500 text-white"><span>3D分割</span></a><!--]--></div></div><!--]--><!--]--><!--]--><div p="x-4 b-8" class="sm:px-6 lg:px-12 xl:px-16" w="full"><!--[--><!--]--><!--[--><!-- <Transition appear> --><article class="markdown-body"><!--[--><!----><blockquote class="yun-time-warning" op="80">本文最后更新于 1 年前，文中所描述的信息可能已发生改变。</blockquote><!--[--><!--]--><!--[--><h2 id="feature-splatting-language-driven-physics-based-scene-synthesis-and-editing" tabindex="-1">Feature Splatting: Language-Driven Physics-Based Scene Synthesis and Editing <a class="header-anchor" href="#feature-splatting-language-driven-physics-based-scene-synthesis-and-editing" aria-label="Permalink to &quot;Feature Splatting: Language-Driven Physics-Based Scene Synthesis and Editing&quot;">​</a></h2><p>website : <a href="https://feature-splatting.github.io" target="_blank" rel="noreferrer">https://feature-splatting.github.io</a></p><h3 id="motivation" tabindex="-1">motivation <a class="header-anchor" href="#motivation" aria-label="Permalink to &quot;motivation&quot;">​</a></h3><p>这篇工作提出了Feature Splatting，半自动的将静态3D场景动态化，用自然语言来操纵外观和注册材质属性来控制动态交互。通过使用<strong>additional view-invariant features</strong>和视觉模型CLIP、DINOv2、SAM来增强3DGS实现。进一步地扩展到基于物理的动态场景，其中物体的类别和物理参数通过语言模型queries赋予。</p><p><strong>让3DGS携带特征</strong>和<strong>基于物理的动态</strong>都遇到了意想不到的技术挑战：</p><ul><li><p>feature map的提取：</p><p>高斯在geometry和radiance上有效地共享相同的interpolation kernal（？什么意思），但是从reference camera获得的2D特征图是低分辨率且有噪声的。直接采用来自Decomposing NeRF for Editing via Feature Field Distillation（NeRF的特征蒸馏）方法会导致低质量的结果，以及大量的高频噪声。我们解决这个问题通过提出一个新方法来提取feature map和一个蒸馏它们的步骤。</p></li><li><p>基于物理的动态：</p><p>为了适应volume-dependent physical effects, 提出in-fill现存的静态高斯的方法，以及在显著变形下如何将3DGS进行转换的方法，这些方法比以往表现的更好。</p></li></ul><p>这个场景建模和合成pipeline，feature splatting，包含了丰富的语义以致于可以使用自然语言来编辑，包括分解静态场景（成每个组件），并联系每个组件通过material properties和基于物理的动态。</p><p>贡献如下：</p><ul><li>提出feature splatting，增强静态场景，使其富有语义和余元驱动的物理真实movement</li><li>一种基于MPM的物理引擎，适用于基于高斯的表示，一种新颖的方法来融合来自多个基础视觉2D模型的特征以进行准确的分解</li><li>一个演示，来正面feature splatting是一个杰出的editing tool</li></ul><h3 id="related-work" tabindex="-1">Related work <a class="header-anchor" href="#related-work" aria-label="Permalink to &quot;Related work&quot;">​</a></h3><ul><li><p>Scene Editing with Distilled Feature Fields：许多工作提出NeRF的编辑方式，现存的工作都主要关注与如何操纵外观。例如</p><ul><li>Distiled Feature Fields（DFF）通过zero-shot open-text分割进行外观编辑，其中使用知识蒸馏将特征从2D基础视觉模型中嵌入。渲染过程中，DFF通过将语言查询与蒸馏特征关联起来分割受影响的体积，从而分解场景。然后，可以对分割出的对象执行外观编辑，例如颜色更改或移除。</li><li>NeRFShop:提出了一个允许用户输入以对NeRF进行几何修改的交互式流程</li><li>Instruct-NeRF2NeRF : 提出不在渲染过程中进行修改，而是使用现成的2D编辑方法来修改用于训练NeRF的图像</li><li>ClimateNeRF : 与本文关系最密切，提出在渲染过程中注入物理模拟以模拟不同的天气效果。然而，由于隐式场景表示的固有局限性，ClimateNeRF只能支持在神经渲染中修改光线行进过程，从而限制其仅能模拟天气效果中的光线反射、折射和衍射。相比之下，我们的方法使用显式表示来支持以对象为中心的物理模拟，具有更广泛的潜在应用。</li></ul></li><li><p>Concurrent Work: 列举一些3D场景理解的文章。然后提到</p><p>在物理仿真最相关的工作：PhysGaussian，表示同样使用了MPM，但不包括语义，并且PhysGaussian手动选择和分配高斯的物理属性。同时在处理高斯旋转时方式也有所不同。</p><p>在分割最相关的工作：Feature3DGS，fuse (2D reference features ) using (priors from multiple foundation models).我们将特征蒸馏视为整个pipeline中的一个组件，用系统优化的技术将训练技术提高30%</p></li></ul><h3 id="method" tabindex="-1">method <a class="header-anchor" href="#method" aria-label="Permalink to &quot;method&quot;">​</a></h3><p>三个关键组件：</p><ul><li>一个将丰富的semantic feature从vision-language models蒸馏到3DGS的方法</li><li>一个将场景通过open-text queries分解成key constituents的方法</li><li>作为物理真实动态场景合成的一部分，一种通过语言确定材料属性的方法</li></ul><h4 id="_3-1-differentiable-feature-splatting" tabindex="-1">3.1 Differentiable Feature Splatting <a class="header-anchor" href="#_3-1-differentiable-feature-splatting" aria-label="Permalink to &quot;3.1 Differentiable Feature Splatting&quot;">​</a></h4><h5 id="feature-splatting" tabindex="-1">Feature Splatting <a class="header-anchor" href="#feature-splatting" aria-label="Permalink to &quot;Feature Splatting&quot;">​</a></h5><p>对每个GS添加一个额外的vector<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo>∈</mo><msup><mi>R</mi><mi>d</mi></msup></mrow><annotation encoding="application/x-tex">f_i∈R^d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8889em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:-.1076em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8491em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span>，与视角方向无关。</p><p>然后用volume rendering渲染特征图</p><figure><img src="/ayene-no-blog/assets/image-20240514173544908.7_KLaPEN.png" alt="image-20240514173544908" loading="lazy" decoding="async"></figure><h5 id="syatems-considerations" tabindex="-1">Syatems Considerations <a class="header-anchor" href="#syatems-considerations" aria-label="Permalink to &quot;Syatems Considerations&quot;">​</a></h5><p>直接光栅化高维度特征会导致昂贵的训练时间，深入分析后发现主要瓶颈在内存访问模式，通过设计了cuda kernal解决</p><h5 id="improving-reference-feature-quality-using-part-priors" tabindex="-1">Improving Reference Feature Quality Using Part-Priors <a class="header-anchor" href="#improving-reference-feature-quality-using-part-priors" aria-label="Permalink to &quot;Improving Reference Feature Quality Using Part-Priors&quot;">​</a></h5><p>Feature Splatting生成的特征取决于参考特征，但直接使用CLIP作为参考特征会导致质量降低，因为CLIP的特征比较粗糙，如下图</p><figure><img src="/ayene-no-blog/assets/image-20240514175837391.DGYcKTyN.png" alt="image-20240514175837391" loading="lazy" decoding="async"></figure><p>与基于NeRF的方法相比，在NeRF上这一问题并不显著，NeRF的隐式连续表示起到了正则化的效果。但3DGS没有这样的正则化，容易过拟合于粗糙reference feature map的噪声。</p><p>本文提出了一个改进GS Feature map质量的方法，通过使用DINOv2和SAM的object priors。</p><p>考虑一个输入图像，首先用SAM生成一个part-level masks集合<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">{M}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span></span></span></span></span>, 对于一个给定的二值掩码M和粗糙的CLIP feature map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">F_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>,本文使用一个Masked Average Pooling（MAP）来聚合一个single feature vector</p><figure><img src="/ayene-no-blog/assets/image-20240514191241457.Bld1AGk2.png" alt="image-20240514191241457" loading="lazy" decoding="async"></figure><p>其中i是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">F_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>​中的一个像素坐标，然后将w分配给分割部分内的所有像素，如果一个像素属于多个部分，则该像素特征通过平均所有相关部分的特征来获得，这样就得到了上图的(d) SAM-enhanced feat</p><blockquote><p>公式是将特征图<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">F_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>过一个分割掩码mask，比如说椅子就只剩下椅子那部分的feature map，然后将椅子对应像素的所有特征向量作平均池化，再重分配给椅子上对应的所有像素</p></blockquote><p>为了进一步降低过拟合的可能性，本文提出了一个shallow MLP，有两个output，并以3DGS的rendered features<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>F</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{F}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9468em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9468em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.1667em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span> 作为中间特征（不是输入么？），两个output分别为预测的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>F</mi><mo>^</mo></mover><mrow><mi>C</mi><mi>L</mi><mi>I</mi><mi>P</mi></mrow></msub><mo separator="true">,</mo><msub><mover accent="true"><mi>F</mi><mo>^</mo></mover><mrow><mi>D</mi><mi>I</mi><mi>N</mi><mi>O</mi><mi>v</mi><mn>2</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\hat{F}_{CLIP}, \hat{F}_{DINOv2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1412em;vertical-align:-.1944em"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9468em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.1667em"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.07153em">C</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span><span class="mord mathnormal mtight" style="margin-right:.13889em">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9468em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.1667em"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">D</span><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span><span class="mord mathnormal mtight" style="margin-right:.02778em">NO</span><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>，用真实的CLIP以及DINOv2的输出做监督，pipeline如下<img src="/ayene-no-blog/assets/image-20240514200537791.CbYZ0nGg.png" alt="image-20240514200537791"></p><p>首先是Feature splatting渲染出一个feature map，每个像素上有一个d维的Latent Feature，通过一层MLP输出预测的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>F</mi><mo>^</mo></mover><mrow><mi>C</mi><mi>L</mi><mi>I</mi><mi>P</mi></mrow></msub><mo separator="true">,</mo><msub><mover accent="true"><mi>F</mi><mo>^</mo></mover><mrow><mi>D</mi><mi>I</mi><mi>N</mi><mi>O</mi><mi>v</mi><mn>2</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\hat{F}_{CLIP}, \hat{F}_{DINOv2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1412em;vertical-align:-.1944em"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9468em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.1667em"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.07153em">C</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span><span class="mord mathnormal mtight" style="margin-right:.13889em">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9468em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.1667em"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">D</span><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span><span class="mord mathnormal mtight" style="margin-right:.02778em">NO</span><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>，用真实的CLIP以及DINOv2的输出做监督，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">F_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>的监督权重更高，反向传播让3DGS能够通过render合成一个修正过的CLIP features map。</p><blockquote><p>换种方式解释，目的是为了让每个gs上有一个语义属性，因此需要render出一个feature map和gt feature map做监督，直接用CLIP生成的feature map监督效果不好，两个优化，第一个是用mask修正clip gt，第二个是用DINOv2作为正则在监督时加入。</p></blockquote><h4 id="_3-2-language-guided-scene-decomposition" tabindex="-1">3.2 Language-guided Scene Decomposition <a class="header-anchor" href="#_3-2-language-guided-scene-decomposition" aria-label="Permalink to &quot;3.2 Language-guided Scene Decomposition&quot;">​</a></h4><p>那么要怎么使用每个高斯上的feature，让它完成场景理解任务呢。</p><p>我们识别3DGS，通过查询其CLIP feature更接近正查询而非负查询（？）</p><p>具体来说，给定一个词汇作为正样本（比如bulldozer），用一个通用的词汇作为负样本（比如object，thing），使用frozen CLIP text encoder来获得以上词汇的text embeddings，遵循CLIP的标准实现，计算rasterized CLIP feature of every Gaussian（应该是每个高斯的CLIP feature，那rasterized这个前缀是不是有些误导性）和text embeddings的余弦相似度，选择那些相似度大于0.6作为前景object。在附录中包含了使用负文本查询的分割结果。</p><p>通过上述方式就选中了需要编辑或者进行仿真的高斯。</p><p>一些简单的编辑操作就容易实现了：</p><figure><img src="/ayene-no-blog/assets/image-20240515140219149.Dmc6eDVI.png" alt="image-20240515140219149" loading="lazy" decoding="async"></figure><h4 id="_3-3-language-driven-physics-synthesis" tabindex="-1">3.3 Language-Driven Physics Synthesis <a class="header-anchor" href="#_3-3-language-driven-physics-synthesis" aria-label="Permalink to &quot;3.3 Language-Driven Physics Synthesis&quot;">​</a></h4><p>feature splatting可以自动选择用于模拟的物理属性、估计碰撞表面、预测重力方向。核心方法在于使用Taichi扩展的MPM</p><h5 id="decoupling-objects-for-simulation" tabindex="-1">Decoupling Objects for Simulation <a class="header-anchor" href="#decoupling-objects-for-simulation" aria-label="Permalink to &quot;Decoupling Objects for Simulation&quot;">​</a></h5><p>对于常见的刚体创建了一组词汇（e.g. wood, ceramic, steel）,可以随用户的可选输入扩展。</p><p>给定一个selected multi-part object（比如一个插有花的花瓶），再执行一次CLIP相似度查询选择对象内与这些材料更接近的粒子。</p><p>在模拟过程中，这些被选定的粒子被认为是刚性的。</p><h5 id="language-grounded-collision-surface-estimation" tabindex="-1">Language-grounded Collision Surface Estimation <a class="header-anchor" href="#language-grounded-collision-surface-estimation" aria-label="Permalink to &quot;Language-grounded Collision Surface Estimation&quot;">​</a></h5><p>预定义一组规范查询（包括常见的平面物体，比如floor和tabletop），将这组查询输入到上述的场景分解pipeline中，获取这些物体的高斯表示，并用RANSAC来估计这些平面的几何形状，在物理模拟时作为碰撞表面。</p><p>重力方向是被估计为“floor”的平面几何的法向量。</p><h5 id="taichi-mpm-for-gaussians" tabindex="-1">Taichi MPM for gaussians <a class="header-anchor" href="#taichi-mpm-for-gaussians" aria-label="Permalink to &quot;Taichi MPM for gaussians&quot;">​</a></h5><p>可以直接将高斯中心μ视为点云使用MPM，但质量不佳，有两个问题：</p><ul><li>缺乏内部支撑，物体在与碰撞表面接触的时候回塌陷</li><li>当物体发生变形时，出现不期望的伪影</li></ul><p>本文的方法超越了简单的基于点的物理模拟，利用了特定于高斯的信息，如各向同性的不透明度和高斯协方差，在变形过程中进行体积保持和协方差修改，以解决上述两个挑战。</p><p>解决方案：</p><ul><li><p>Implicit Volume Preservation ： 在从少量真实世界图像中模拟物理现象时，体积保持是一个未解决的挑战。</p><p>例如，没有体积保持，模拟一个排球撞击地面时会在碰撞时塌陷。因此，我们提出了一种使用高斯的不透明度和协方差的隐式体积保持技术。具体来说，我们首先使用协方差和不透明度信息按照PhysGaussian的方法在表面高斯的圆盘上采样点以增加表面点的密度。通过增加表面点的密度，我们随后填充从对象中心到表面的透明支撑粒子。填充粒子的透明性旨在确保在T = 0时的渲染质量一致，从而实现从静态场景到动态场景的平滑连续过渡。</p></li><li><p>Estimating Rotation : 当物体发生变形的时候，需要校正协方差矩阵的旋转分量，否则可能会产生伪影。PhysGaussian也注意到了这个问题，尝试使用MPM的变形梯度F来更新高斯的协方差。然而变形梯度主要捕捉局部变化，当弹性物体发生大变形的时候，这种方法就会失效。因此我们提出用法线来估算弹性物体的旋转矩阵。</p><p>3DGS难以在稀疏重建时估计法线，因此本文采用了一种基于神经网络的方法。</p><p>具体来说，对于每个要模拟的高斯，我们找到其两个最近的邻居。这三个高斯的中心形成一个平面，我们使用该平面法线的旋转作为整个物体动态的代理。与从变形估算的旋转相比，我们的方法在物体发生大变形时产生的伪影更少。</p></li></ul><h4 id="experiments" tabindex="-1">Experiments <a class="header-anchor" href="#experiments" aria-label="Permalink to &quot;Experiments&quot;">​</a></h4><p>dataset : deep blending, Mip-NeRF360, custom dataset</p><h2 id="segment-any-3d-gaussians" tabindex="-1">Segment Any 3D Gaussians <a class="header-anchor" href="#segment-any-3d-gaussians" aria-label="Permalink to &quot;Segment Any 3D Gaussians&quot;">​</a></h2><p><a href="https://jumpat.github.io/SAGA" target="_blank" rel="noreferrer">https://jumpat.github.io/SAGA</a></p><h3 id="motivation-1" tabindex="-1">motivation <a class="header-anchor" href="#motivation-1" aria-label="Permalink to &quot;motivation&quot;">​</a></h3><p>过去的方法：</p><ul><li>使用2D模型中提取2D特征，提升到3D空间中，用3D特征的相似性判断两个点是否属于同一对象：速度较快，但分割粒度粗，因为缺乏解析嵌入特征的机制（e.g. 分割解码层）</li></ul><blockquote><p>related word中提到：仅仅依靠欧几里得距离或余弦距离时无法充分利用嵌入在高维视觉特征中的信息，因此此类方法的分割质量是有限的。</p></blockquote><ul><li>(segment anything nerf)直接将细粒度的2D分割结果投影到3Dmask grid上：产生精确的结果，但是由于多次执行基础模型和体渲染，导致过大时间开销</li></ul><p>3DGS绕过对广泛且空的空间的处理，提供丰富的显式信息，成为分割任务的理想选择</p><p>SAGA避免了推理期间多次前向传递 2D 分割模型的时间消耗。蒸馏是通过基于 SAM [23] 自动提取的掩码来训练高斯的 3D 特征实现的。在推理过程中，根据输入提示生成一组查询，然后通过高效的特征匹配检索预期的高斯。支持点、涂鸦和掩码在内的各种提示类型。</p><h3 id="method-1" tabindex="-1">method <a class="header-anchor" href="#method-1" aria-label="Permalink to &quot;method&quot;">​</a></h3><h4 id="sam" tabindex="-1">SAM <a class="header-anchor" href="#sam" aria-label="Permalink to &quot;SAM&quot;">​</a></h4><p>提供一个输入图片<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07847em">I</span></span></span></span>和提示（可以是point，涂鸦或者mask）<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">P</span></span></span></span>，得到一个掩码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">M</span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>M</mi><mo>=</mo><mi>S</mi><mi>A</mi><mi>M</mi><mo stretchy="false">(</mo><mi>I</mi><mo separator="true">,</mo><mi>P</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">M = SAM(I,P)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.07847em">I</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.13889em">P</span><span class="mclose">)</span></span></span></span></span></p><h4 id="overall-pipeline" tabindex="-1">Overall pipeline <a class="header-anchor" href="#overall-pipeline" aria-label="Permalink to &quot;Overall pipeline&quot;">​</a></h4><h5 id="训练阶段" tabindex="-1">训练阶段： <a class="header-anchor" href="#训练阶段" aria-label="Permalink to &quot;训练阶段：&quot;">​</a></h5><p>给定一个预训练完成的3DGS model <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal">G</span></span></span></span>，输入图片<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07847em">I</span></span></span></span></p><p>对于一组图片，使用SAM得到一组2D特征图<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>F</mi><mi>I</mi><mrow><mi>S</mi><mi>A</mi><mi>M</mi></mrow></msubsup><mo>∈</mo><msup><mi>R</mi><mrow><msup><mi>C</mi><mrow><mi>S</mi><mi>A</mi><mi>M</mi></mrow></msup><mo>×</mo><mi>H</mi><mo>×</mo><mi>W</mi></mrow></msup></mrow><annotation encoding="application/x-tex">F^{SAM}_I∈R^{C^{SAM}×H×W}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1167em;vertical-align:-.2753em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-2.4247em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2753em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1.0064em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0064em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.07153em">C</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9191em"><span style="top:-2.931em;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style="margin-right:.08125em">H</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style="margin-right:.13889em">W</span></span></span></span></span></span></span></span></span></span></span></span>，和一组不同粒度的掩码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>M</mi><mi>I</mi><mrow><mi>S</mi><mi>A</mi><mi>M</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">M^{SAM}_I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1167em;vertical-align:-.2753em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-2.4247em;margin-left:-.109em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2753em"><span></span></span></span></span></span></span></span></span></span></p><p>在每个高斯上训练一个低维特征<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>g</mi></msub><mo>∈</mo><msup><mi>R</mi><mi>C</mi></msup></mrow><annotation encoding="application/x-tex">f_g∈R^C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9805em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.1076em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">g</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8413em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07153em">C</span></span></span></span></span></span></span></span></span></span></span>，通过SAM-guidance loss做监督。</p><blockquote><p>没太看懂的correspondence loss的定义</p><p>To further enhance the feature compactness, we derive point-wise correspondences from extracted masks and distills them into the features (i.e., the correspondence loss).</p></blockquote><h5 id="推理阶段" tabindex="-1">推理阶段： <a class="header-anchor" href="#推理阶段" aria-label="Permalink to &quot;推理阶段：&quot;">​</a></h5><p>从给定的提示<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">P</span></span></span></span>中生成一组查询<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8778em;vertical-align:-.1944em"></span><span class="mord mathnormal">Q</span></span></span></span>，用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8778em;vertical-align:-.1944em"></span><span class="mord mathnormal">Q</span></span></span></span>​通过特征匹配来检索3DGS，此后用3DGS提供的类似点云的丰富显式先验来做后处理</p><h4 id="training-features-for-gaussians" tabindex="-1">Training Features for Gaussians <a class="header-anchor" href="#training-features-for-gaussians" aria-label="Permalink to &quot;Training Features for Gaussians&quot;">​</a></h4><h5 id="sam-guidance-loss" tabindex="-1">SAM-guidance Loss <a class="header-anchor" href="#sam-guidance-loss" aria-label="Permalink to &quot;SAM-guidance Loss&quot;">​</a></h5><p>先将SAM的特征通过MLP <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>φ</mi></mrow><annotation encoding="application/x-tex">φ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">φ</span></span></span></span>降维到和高斯相同</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>F</mi><mi>I</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo>=</mo><mi>φ</mi><mo stretchy="false">(</mo><msubsup><mi>F</mi><mi>I</mi><mrow><mi>S</mi><mi>A</mi><mi>M</mi></mrow></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F'_I=φ(F^{SAM}_I)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0489em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8019em"><span style="top:-2.453em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-.25em"></span><span class="mord mathnormal">φ</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8913em"><span style="top:-2.453em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>对于每一个mask，做一个maked平均池化，比如一个pikachu的mask，将皮卡丘上所有像素点的特征平均池化成一个特征向量(论文中称为Query)<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mi>M</mi></msup><mo>∈</mo><msup><mi>R</mi><mi>C</mi></msup></mrow><annotation encoding="application/x-tex">T^M∈R^C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8804em;vertical-align:-.0391em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8413em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07153em">C</span></span></span></span></span></span></span></span></span></span></span>，现在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mi>M</mi></msup></mrow><annotation encoding="application/x-tex">T^M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8413em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span></span></span></span></span></span></span></span>就代表pikachu</p><figure><img src="/ayene-no-blog/assets/image-20240528161206976.D8QENkwp.png" alt="image-20240528161206976" loading="lazy" decoding="async"></figure><figure><img src="/ayene-no-blog/assets/image-20240528161215385.DsoaQOwh.png" alt="image-20240528161215385" loading="lazy" decoding="async"></figure><p>代码对应如下：</p><figure><img src="/ayene-no-blog/assets/image-20240528165428089.NlkHRkqp.png" alt="image-20240528165428089" loading="lazy" decoding="async"></figure><p>然后将render出的特征图和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mi>M</mi></msup></mrow><annotation encoding="application/x-tex">T^M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8413em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span></span></span></span></span></span></span></span>做点积，相当于使用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">T_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>在feature map上做查询，询问哪些像素点是pikachu？如果是，该像素上的feature点乘<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mi>M</mi></msup></mrow><annotation encoding="application/x-tex">T^M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8413em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span></span></span></span></span></span></span></span>就会得到较高的值（余弦相似度高），从而得到分割图<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">P_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>，再通过Sigmoid归一化成概率图</p><figure><img src="data:image/png;base64,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" alt="image-20240528172903491" loading="lazy" decoding="async"></figure><p>将查询到的分割图和真实的分割图做二值交叉熵进行训练</p><figure><img src="/ayene-no-blog/assets/image-20240528174904961.D6Xsgh_T.png" alt="image-20240528174904961" loading="lazy" decoding="async"></figure><h5 id="correspondence-loss" tabindex="-1">Correspondence Loss <a class="header-anchor" href="#correspondence-loss" aria-label="Permalink to &quot;Correspondence Loss&quot;">​</a></h5><p>一张图片上的两个像素<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mn>1</mn><mo separator="true">,</mo><mi>p</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">p1, p2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8389em;vertical-align:-.1944em"></span><span class="mord mathnormal">p</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal">p</span><span class="mord">2</span></span></span></span>，可能属于多个mask，将多个mask定义为集合<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>M</mi><mrow><mi>p</mi><mn>1</mn></mrow></msup><mo separator="true">,</mo><mi>M</mi><mrow><mi>p</mi><mn>2</mn></mrow></mrow><annotation encoding="application/x-tex">M^{p1}, M{p2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="mord"><span class="mord mathnormal">p</span><span class="mord">2</span></span></span></span></span>,显然如果两个mask交并比高，则他们应该有更相似的特征：</p><p>交并比定义为：</p><figure><img src="/ayene-no-blog/assets/image-20240628204330540.BcX2FGbR.png" alt="image-20240628204330540" loading="lazy" decoding="async"></figure><p>两个像素代表的特征的相似度为：</p><figure><img src="data:image/png;base64,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" alt="image-20240628204345569" loading="lazy" decoding="async"></figure><p>最终构成一个loss，交并比越高时，约束相似度足够大（Loss是回传给特征的，因此是约束<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span></span></span></span>）</p><figure><img src="/ayene-no-blog/assets/image-20240628204507958.DxHoK3xs.png" alt="image-20240628204507958" loading="lazy" decoding="async"></figure><h3 id="inference" tabindex="-1">Inference <a class="header-anchor" href="#inference" aria-label="Permalink to &quot;Inference&quot;">​</a></h3><h5 id="sam-based-prompt" tabindex="-1">SAM-based Prompt <a class="header-anchor" href="#sam-based-prompt" aria-label="Permalink to &quot;SAM-based Prompt&quot;">​</a></h5><p>可以直接使用SAM低维特征做查询。</p><p>先将prompts给SAM生成一个精确的2D分割掩码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>M</mi><mi>v</mi><mrow><mi>r</mi><mi>e</mi><mi>f</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">M_v^{ref}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0961em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-2.453em;margin-left:-.109em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight" style="margin-right:.10764em">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span></span></span></span></p><p>在这个掩码上做平均池化得到一个查询<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mrow><mi>m</mi><mi>a</mi><mi>s</mi><mi>k</mi></mrow></msup></mrow><annotation encoding="application/x-tex">Q^{mask}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0435em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span></span></span></span></span></span></span></span></span></span></span></span>[注: 查询应该是一个C维特征向量]</p><p>用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mrow><mi>m</mi><mi>a</mi><mi>s</mi><mi>k</mi></mrow></msup></mrow><annotation encoding="application/x-tex">Q^{mask}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0435em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span></span></span></span></span></span></span></span></span></span></span></span>分割2D渲染特征图<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>F</mi><mi>v</mi><mi>r</mi></msubsup></mrow><annotation encoding="application/x-tex">F^r_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9303em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.6644em"><span style="top:-2.453em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span></span></span></span>得到2D分割掩码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>M</mi><mi>v</mi><mrow><mi>t</mi><mi>e</mi><mi>m</mi><mi>p</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">M_v^{temp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0406em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.7936em"><span style="top:-2.453em;margin-left:-.109em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span></span></span></span></p><p>如果<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>M</mi><mi>v</mi><mrow><mi>r</mi><mi>e</mi><mi>f</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">M_v^{ref}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0961em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-2.453em;margin-left:-.109em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight" style="margin-right:.10764em">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>M</mi><mi>v</mi><mrow><mi>t</mi><mi>e</mi><mi>m</mi><mi>p</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">M_v^{temp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0406em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.7936em"><span style="top:-2.453em;margin-left:-.109em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span></span></span></span>的交集占据了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>M</mi><mi>v</mi><mrow><mi>r</mi><mi>e</mi><mi>f</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">M_v^{ref}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0961em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-2.453em;margin-left:-.109em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight" style="margin-right:.10764em">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span></span></span></span>超过90%的空间，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mrow><mi>m</mi><mi>a</mi><mi>s</mi><mi>k</mi></mrow></msup></mrow><annotation encoding="application/x-tex">Q^{mask}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0435em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span></span></span></span></span></span></span></span></span></span></span></span>就作为正式的查询。</p><p>否则，使用K-means算法来从低维特征中提取另一组查询<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Q</mi><mi>v</mi><mrow><mi>k</mi><mi>m</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">Q^{kmans}_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0961em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-2.453em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">kman</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span></span></span></span></p><p>使用这个策略是因为分割目标可能包含许多components，不能简单的使用masked平均池化来捕获</p><hr><p>获得查询<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Q</mi><mi>v</mi><mrow><mi>S</mi><mi>A</mi><mi>M</mi></mrow></msubsup><mo>=</mo><msubsup><mi>Q</mi><mi>v</mi><mrow><mi>m</mi><mi>a</mi><mi>s</mi><mi>k</mi></mrow></msubsup><mspace width="1em"><mi>o</mi><mi>r</mi><mspace width="1em"><msubsup><mi>Q</mi><mi>v</mi><mrow><mi>k</mi><mi>m</mi><mi>e</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">Q^{SAM}_v=Q^{mask}_v\quad or\quad Q^{kmeans}_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0883em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-2.453em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:.10903em">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1.0961em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-2.453em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em"></span><span class="mord mathnormal" style="margin-right:.02778em">or</span><span class="mspace" style="margin-right:1em"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-2.453em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">v</span></span></span><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">km</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">an</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span></span></span></span>后，用点乘计算每个高斯点的特征<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>g</mi></msub></mrow><annotation encoding="application/x-tex">f_g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9805em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.1076em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">g</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span>和查询<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8778em;vertical-align:-.1944em"></span><span class="mord mathnormal">Q</span></span></span></span>的相似度，如果查询分数大于自适应阈值（所有分数的均值和标准差之和）就认为是所要的点</p><h2 id="opengaussian-towards-point-level-3d-gaussian-based-open-vocabulary-understanding" tabindex="-1">OpenGaussian: Towards Point-Level 3D Gaussian-based Open Vocabulary Understanding <a class="header-anchor" href="#opengaussian-towards-point-level-3d-gaussian-based-open-vocabulary-understanding" aria-label="Permalink to &quot;OpenGaussian: Towards Point-Level 3D Gaussian-based Open Vocabulary Understanding&quot;">​</a></h2><h3 id="motivation-2" tabindex="-1">motivation <a class="header-anchor" href="#motivation-2" aria-label="Permalink to &quot;motivation&quot;">​</a></h3><p>首先举出现存特征GS的管线： <img src="/ayene-no-blog/assets/image-20240624133901178.DxHPlHLA.png" alt="image-20240624133901178"></p><p>提出两个问题</p><ul><li>对被遮挡的物体无法识别，失去了3DGS本身固有的能力</li><li>不是point-level的语义理解，对具身智能任务失效</li></ul><p>因此提出了一个拥有3D point-level open-vocabulary understanding的模型</p><p>那么如果想要实现点级别的查询，一般可以通过以下流程，查询每个点的相似度： <img src="/ayene-no-blog/assets/image-20240624135833239.BjU4G-zi.png" alt="image-20240624135833239"></p><blockquote><p>当然，个人觉得并不一定要用语言，池化特征也挺好用的</p></blockquote><p>但是其他模型效果不好，归结为以下原因：</p><ul><li>因为512维特征嵌入困难（内存和速度限制），所以采用了降维或量化（指LEGaussians ，这里的量化是压缩的意思），这损害了特征的精度</li><li><strong>2D-3D对应关系不准确</strong>：alpha混合渲染技术基于不透明度权重累积3D点的值以渲染2D像素，这阻碍了2D与3D之间的一对一对应关系的建立。因此，在2D和3D解释之间出现了性能不匹配的情况。</li></ul><p>为了解决上述挑战，提出了以下方法，在point level上学习具有区别性和一致性特征的方法，既能在对象之间也能在对象内部保持一致性。本文的方法将高维无损的CLIP特征和3D高斯点关联起来，实现了开放词汇的3D场景理解。</p><ul><li>使用提出的掩码内平滑损失和掩码间对比损失来训练在3D点级别上既有区别性又有3D一致性的实例特征，利用来自SAM [23]的布尔掩码而无需跨帧关联；</li><li>引入两级粗到细的码本来离散化实例特征，从而生成离散的3D实例簇；</li><li>提出基于IoU和特征距离的实例级2D-3D关联方法，将多个视角的CLIP特征关联到每个3D实例。</li></ul><h3 id="related-work-1" tabindex="-1">Related work <a class="header-anchor" href="#related-work-1" aria-label="Permalink to &quot;Related work&quot;">​</a></h3><p>LEGaussians [15] 为每个高斯引入了不确定性和语义特征属性，以呈现具有相应不确定性的语义图。该渲染图与从地面真实图像中提取的量化的CLIP和DINO密集特征进行了比较。LangSplat [14] 使用场景语言自动编码器来学习特定场景潜在空间上的语言特征，证明识别渲染特征图像中对象之间的清晰边界。Feature3DGS[16]提出了一种并行N维高斯光栅化器来提取高维特征，用于基于视图的任务，如编辑和分割。为了实现跨视图的 2D 掩码一致性，Gaussian Grouping [17] 执行开放世界 3D 对象的同时重建和分割，由从 SAM 和 3D 空间一致性约束获得的 2D 掩码预测指导。与这些工作类似，我们利用 3DGS 的实时渲染和显式表示能力。<strong>然而，虽然这些方法主要关注像素级开放词汇理解(即，将2D特征提升到视图一致的分割)，但我们的方法发散，因为我们的目标是增强3DGS，并具有3D点级开放词汇理解的能力。</strong></p><h3 id="method-2" tabindex="-1">Method <a class="header-anchor" href="#method-2" aria-label="Permalink to &quot;Method&quot;">​</a></h3><h4 id="_3-1-3d-consistency-preserving-instance-feature-learning" tabindex="-1">3.1 3D Consistency-Preserving Instance Feature Learning <a class="header-anchor" href="#_3-1-3d-consistency-preserving-instance-feature-learning" aria-label="Permalink to &quot;3.1 3D Consistency-Preserving Instance Feature Learning&quot;">​</a></h4><p>提出掩码内平滑损失和掩码间对比损失，</p><p>intra-mask smoothing loss：掩码内平滑损失</p><figure><img src="/ayene-no-blog/assets/image-20240624145935712.C-2UgVv6.png" alt="image-20240624145935712" loading="lazy" decoding="async"></figure><p>先阿尔法合成渲染出一张特征图M，然后用SAM得到m个实例的平均池化特征，再以每个实例中的每个像素点和平均特征做一致性损失</p><p>inter-mask contrastive loss：掩码间对比损失：</p><figure><img src="/ayene-no-blog/assets/image-20240624150757369.C7sxItF5.png" alt="image-20240624150757369" loading="lazy" decoding="async"></figure><p>总之不同instance的特征越接近，损失越大。</p><blockquote><p>只使用mask进行训练，这个训练出的6维特征并不属于SAM或是CLIP，看起来是一种无监督训练，用SAM的mask指导同一个mask内的GS具有相同的特征，用掩码间对比损失让不同特征足够远，实际上做了一个聚类</p></blockquote><h4 id="_3-2-two-level-codebook-for-discretization" tabindex="-1">3.2 Two-Level Codebook for Discretization <a class="header-anchor" href="#_3-2-two-level-codebook-for-discretization" aria-label="Permalink to &quot;3.2 Two-Level Codebook for Discretization&quot;">​</a></h4><p>直观来看，学习到的实例特征非常适合进行交互式3D对象分割。例如，通<strong>过点击渲染特征图中的一个像素，我们可以检索具有相似特征的高斯点来识别所选对象</strong>。然而，这种方法的实际实现存在以下挑战：</p><ul><li>设置一个通用的阈值来选择相似特征是困难的；</li><li>由于特征图是通过alpha混合渲染的，这会累积权重，因此同一对象的高斯点不可避免地会表现出不同的特征，而不同对象的高斯点可能会共享相似的特征。</li></ul><p>为了增强实例特征的区分度并改进下游任务的交互性，我们旨在确保同一实例的高斯点<strong>具有相同的（不仅仅是相似的）特征</strong>，通过离散化来实现这一点。受之前关于3DGS压缩的工作[46, 47]的启发，我们提出采用代码本离散化来解决这一挑战。如图3(b)所示，离散化之前的点特征表现出噪声。</p><p>具体method略，总之连续的实例特征 F 转换为压缩特征和索引<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>C</mi><mo separator="true">,</mo><mi>I</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{C,I\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:.07153em">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.07847em">I</span><span class="mclose">}</span></span></span></span></p><h4 id="_3-3-instance-level-2d-3d-association-without-depth-test" tabindex="-1">3.3 Instance-Level 2D-3D Association without Depth Test <a class="header-anchor" href="#_3-3-instance-level-2d-3d-association-without-depth-test" aria-label="Permalink to &quot;3.3 Instance-Level 2D-3D Association without Depth Test&quot;">​</a></h4><p>通过上述流程已经将不同instance的高斯分类好了，现在的问题是怎么进行开放词汇查询，具体到本文也就是将高维特征与对应的高斯instance匹配上，以往的论文有两个方法：</p><ul><li>将CLIP或SAM的2D特征蒸馏到3DGS上，需要额外的网络、训练和编码器解码器，还有压缩特征带来的模糊原始语义的问题</li><li>做2D-3D的匹配，将2D图像特征映射到3D点，需要深度信息进行遮挡测试</li></ul><p>本文提出了一种简单而高效的实例级别的3D-2D关联方法，保留高维、无损的语言特征，同时避免了基于深度的遮挡测试的需求。</p><p>具体步骤：</p><ul><li>将单个高斯instance渲染出一个单instance map<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">M_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:-.109em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span></li><li>计算当前视图下，所有SAM掩码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>B</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">B_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9694em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.05017em">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:-.0502em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">M_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10903em">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:-.109em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>的交并比，直观上理解交并比最高的那个SAM掩码就是对应的物体（然后用SAM掩码取出池化特征？），但是由于遮挡的存在，一个“SAM掩码”可能与从多个3D实例渲染的“单实例地图”相交，这就是前述像素到点关联方法需要深度进行遮挡测试的原因。</li><li>因此，用3.2的伪真值特征填充<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>B</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">B_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9694em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.05017em">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:-.0502em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span>，让它从二值mask变为特征填充mask<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>j</mi></msub><mo>∈</mo><msup><mi>R</mi><mrow><mn>6</mn><mo>×</mo><mi>H</mi><mo>×</mo><mi>W</mi></mrow></msup></mrow><annotation encoding="application/x-tex">P_j∈R^{6×H×W}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9694em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8413em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style="margin-right:.08125em">H</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style="margin-right:.13889em">W</span></span></span></span></span></span></span></span></span></span></span></span>，通过下式计算距离：</li></ul><figure><img src="/ayene-no-blog/assets/image-20240624161729777.BFKlun7G.png" alt="image-20240624161729777" loading="lazy" decoding="async"></figure><blockquote><p>就是既用上二值mask的交并比，又用上mask下特征的L1距离的意思，注意到M和P都是本文无监督分类训练出来的特征而并非CLIP特征</p></blockquote><p>最终，与得分最高的掩码的CLIP图像特征关联到3D实例的高斯点，并考虑多视角特征的整合。（大概就是用SAM掩码取出池化特征，对应到该高斯instance上了）</p><h3 id="experiments-1" tabindex="-1">Experiments <a class="header-anchor" href="#experiments-1" aria-label="Permalink to &quot;Experiments&quot;">​</a></h3><p>实验效果当然很好，首先是文本查询</p><figure><img src="/ayene-no-blog/assets/image-20240624163122686.BuAH75Yj.png" alt="image-20240624163122686" loading="lazy" decoding="async"></figure><p>和SAGA一样的鼠标点击查询</p><figure><img src="/ayene-no-blog/assets/image-20240624163148178.jJVwQ-rR.png" alt="image-20240624163148178" loading="lazy" decoding="async"></figure><h3 id="个人总结" tabindex="-1">个人总结 <a class="header-anchor" href="#个人总结" aria-label="Permalink to &quot;个人总结&quot;">​</a></h3><p>这篇文章给出了一个分割的新思路，既然直接蒸馏有各种各样的问题，那么干脆不在高斯上进行监督训练，而是通过SAM的掩码将高斯先进行无监督训练出一个独特的特征，再离散化成各个高斯实例（每个包含一个高斯簇），最后为了支持文本查询将高斯instance对应到CLIP特征，如果只需要分割可以免去这一步</p><p>这里可以引出一些思路，虽然并不打算放弃蒸馏的做法，但是可以在特征降维后先对低维特征做处理，训练出一个编码解码器能够像本文那样让相同特征近，不同特征远，再进行蒸馏，即可以不使用CLIP的原始特征，而是逐场景的新特征。</p><p>另外本文指出之前文章不足之处的切入点也很准确，例如方法主要关注像素级开放词汇理解(即，将2D特征提升到视图一致的分割)，但我们的方法发散，因为我们的目标是增强3DGS，并具有3D点级开放词汇理解的能力。写作时值得再读一遍。</p><h2 id="gaussian-grouping-segment-and-edit-anything-in-3d-scenes" tabindex="-1">Gaussian Grouping: Segment and Edit Anything in 3D Scenes <a class="header-anchor" href="#gaussian-grouping-segment-and-edit-anything-in-3d-scenes" aria-label="Permalink to &quot;Gaussian Grouping: Segment and Edit Anything in 3D Scenes&quot;">​</a></h2><h3 id="motivation-3" tabindex="-1">motivation <a class="header-anchor" href="#motivation-3" aria-label="Permalink to &quot;motivation&quot;">​</a></h3><p>比较早的文章，所以没有指出现有常见方法的不足，在提NeRF等早期方法</p><p>方法overview大概如下：</p><ul><li>为每个高斯增加身份编码，其实就是一种低维特征</li><li>训练完身份编码后，通过MLP对身份编码进行分类</li><li>用交叉熵进行监督以外，加入了KNN进行正则，出于空间上相近的3DGS在身份编码上也相近的先验</li></ul><h3 id="method-3" tabindex="-1">method <a class="header-anchor" href="#method-3" aria-label="Permalink to &quot;method&quot;">​</a></h3><h4 id="_3-2-1-anything-mask-input-and-consistency" tabindex="-1">3.2.1 Anything Mask Input and Consistency <a class="header-anchor" href="#_3-2-1-anything-mask-input-and-consistency" aria-label="Permalink to &quot;3.2.1 Anything Mask Input and Consistency&quot;">​</a></h4><ul><li>首先使用SAM为多视角图片生成MASK，为每个2D mask生成唯一id</li><li>现在需要将不同视角中，代表相同身份的mask关联起来，具体方法如下：<ul><li>采用一个预训练的0样本跟踪器来传播和关联mask，同时提供3D场景中身份编码的总数量</li></ul></li></ul><h4 id="_3-2-2-3d-gaussian-rendering-and-grouping" tabindex="-1">3.2.2 3D Gaussian Rendering and Grouping <a class="header-anchor" href="#_3-2-2-3d-gaussian-rendering-and-grouping" aria-label="Permalink to &quot;3.2.2 3D Gaussian Rendering and Grouping&quot;">​</a></h4><p>16维身份编码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">e^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8247em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8247em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span>,α合成</p><figure><img src="/ayene-no-blog/assets/image-20240625142405846.DCGo1k4x.png" alt="image-20240625142405846" loading="lazy" decoding="async"></figure><p>用degree为0的球谐表示，因为身份和视角无关。</p><h5 id="grouping-loss" tabindex="-1">Grouping Loss <a class="header-anchor" href="#grouping-loss" aria-label="Permalink to &quot;Grouping Loss&quot;">​</a></h5><p>关于如何训练身份编码，作者设计了2个loss</p><p>1、<strong>2D身份损失</strong>：通过alpha合成出<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">E_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:-.0576em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>后，通过一个线性层<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8889em;vertical-align:-.1944em"></span><span class="mord mathnormal" style="margin-right:.10764em">f</span></span></span></span>恢复特征维度到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">K+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>,再经过softmax进行分类，再使用交叉熵损失<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mrow><mn>2</mn><mi>d</mi></mrow></msub></mrow><annotation encoding="application/x-tex">L_{2d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>进行训练，真值来自之前进行跟踪分类得到的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">K</span></span></span></span>个物体分类</p><p>2、<strong>3D正则化损失</strong>：用P表示一个3DGS的身份编码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">e_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.5806em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>,Q表示该3DGS的最近k个GS的身份编码集合<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>e</mi><mn>2</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>e</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">{e_1,e_2...,e_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span></span>,用KL散度衡量P和Q身份编码的差异，即约束最近的身份编码要尽量相同</p><figure><img src="/ayene-no-blog/assets/image-20240625145025412.D2mfS0Jk.png" alt="image-20240625145025412" loading="lazy" decoding="async"></figure><p>最后的训练Loss：</p><figure><img src="/ayene-no-blog/assets/image-20240627170902851.BsBxdn-s.png" alt="image-20240627170902851" loading="lazy" decoding="async"></figure><blockquote><p>难得一见的边训练图像边训练特征</p></blockquote><p>来看一遍管线图</p><figure><img src="/ayene-no-blog/assets/image-20240627172353274.BRRljs6N.png" alt="image-20240627172353274" loading="lazy" decoding="async"></figure><p>（a）部分是用SAM生成mask，这时还没有将多视图联系起来，所以同一物体在不同区域拥有不同颜色</p><p>（b）通过视频跟踪模型得到具有一致性的mask，此时有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">K</span></span></span></span>个身份consistent ID</p><p>（c）身份编码阿尔法合成出<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">E_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:-.0576em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>, 过一层MLP再softmax分类到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">K+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>类中的一类,通过2D损失与(b)作为真值训练，3D损失利用空间KNN来保证相邻的高斯身份编码接近。</p><h4 id="_3-3-local-gaussian-editing" tabindex="-1">3.3. Local Gaussian Editing <a class="header-anchor" href="#_3-3-local-gaussian-editing" aria-label="Permalink to &quot;3.3. Local Gaussian Editing&quot;">​</a></h4><p>那么关于如何选中对应的高斯，即输入一个ID i，然后将3DGS的身份编码过MLP+softmax，如果是i则选中。</p><p>关于开放词汇查询，本文将prompt输入grouding DINO，得到2D图像中的掩码，再根据这个掩码选中本文SAM的掩码，得到需要的ID i</p><ul><li>3D对象移除：删除编辑目标的3D高斯</li><li>3D场景重组：交换两个高斯组之间的3D位置</li><li>3D对象修复：除相关的3D高斯，然后添加少量新的高斯，并在渲染过程中由LAMA[41]的2D修补结果进行监督。</li><li>3D对象着色或风格迁移：仅仅调整SH参数</li></ul><h3 id="experiments-2" tabindex="-1">Experiments <a class="header-anchor" href="#experiments-2" aria-label="Permalink to &quot;Experiments&quot;">​</a></h3><p>2D、3D损失的消融实验</p><figure><img src="/ayene-no-blog/assets/image-20240626162529620.Cep0lnsX.png" alt="image-20240626162529620" loading="lazy" decoding="async"></figure><h2 id="gaga-group-any-gaussians-via-3d-aware-memory-bank" tabindex="-1">Gaga: Group Any Gaussians via 3D-aware Memory Bank <a class="header-anchor" href="#gaga-group-any-gaussians-via-3d-aware-memory-bank" aria-label="Permalink to &quot;Gaga: Group Any Gaussians via 3D-aware Memory Bank&quot;">​</a></h2><p>和上一篇文章一脉相承，采用了同样的身份编码的预设</p><figure><img src="/ayene-no-blog/assets/image-20240627153332640.BEGpNzyh.png" alt="image-20240627153332640" loading="lazy" decoding="async"></figure><p>本篇的见解在于：[9, 26] (CoSeg和Group Gaussian)假设相邻的输入视图是相似的，并应用视频目标跟踪器来关联不同视图中的不一致2D掩码。然而，这一假设可能并不适用于所有3D场景，尤其是当输入视图<strong>稀疏</strong>时。Gaga受到了多视图掩码关联任务和视频中物体跟踪任务之间根本性差异的启发：3D信息的整合。为了可靠地生成跨不同视图一致的掩码，我们提出了一种方法，利用3D信息而不依赖于对输入图像的任何假设。我们的关键见解是，<strong>不同视图中属于同一实例的掩码应对应于3D空间中的同一高斯组</strong>。因此，这些高斯应被组合在一起并分配一个相同的组ID。</p><blockquote><p>意思大概是：</p><p>之前的方法通过假设多视角图像具有连续性，通过视频跟踪的方法来将不同视角下同一物体的掩码联系起来，这不是在所有情况下都适用的，比如相机移动的过程中有遮挡、或者是无法视为连续序列的稀疏视角下</p><p>但是这里还没开始具体讲本文将用什么方法来代替它</p></blockquote><p>首先要将2D mask和对应的3DGS相关联，具体来讲：</p><ul><li>选取一帧输入位姿，可知道该位姿下的m个mask，再将3DGS在该位姿下投影到2D空间，可以知道哪些3DGS分布在对应的mask上，这些3DGS可以视为mask在3D空间中的表示，可以为不同视角下mask的关联提供指导。</li></ul><p>首先要提的是，mask通常表示前景对象的形状，但是这样的选中方式会选中部分被遮挡的背景高斯，为了解决这个问题选中最靠近相机帧前x%的3DGS，x根据场景进行微调</p><figure><img src="/ayene-no-blog/assets/image-20240627160136341.BkRki-eC.png" alt="image-20240627160136341" loading="lazy" decoding="async"></figure><p>如上图，是某个视角下选中了车轮的所有高斯，但是在另一个视角下可以看出车轮后面的高斯也被选中了。</p><p>此外，如果直接在整张图片下，基于mask选中高斯分布会不准确的表示大区域mask的形状，无法关联不同相机姿态下的mask，所以将图像氛围32x32的patch，每个patch内计算最靠近相机的x%的3DGS，作为mask m对应的高斯分布，记为G（m），如图所示：</p><figure><img src="/ayene-no-blog/assets/image-20240627162534394.DP781Xdl.png" alt="image-20240627162534394" loading="lazy" decoding="async"></figure><blockquote><p>其实没太理解为什么切分为patch后再选中会更准确，可以看view1（第一二列）第一张图最左边，黄接蓝的窗户是不对的，整个窗户都应该是同色，而patch后的可以做到</p></blockquote><p>现在已经找到了每一个mask对应的3DGS，要做的就是将不同视角下的mask联系起来，这里通过计算不同mask对应3DGS的相交程度来判断，先建立一个数据结构memory bank，里面存储了N组高斯，表示为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>i</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>N</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">G_i,i∈\{1, 2, 3,...,N\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8778em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mclose">}</span></span></span></span>,对于一个mask对应的高斯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span>，通过以下公式计算overlap，如果超过某一阈值就认为它属于第i组高斯，把掩码m认为属于第i组</p><figure><img src="/ayene-no-blog/assets/image-20240627165045781.Boihfpde.png" alt="image-20240627165045781" loading="lazy" decoding="async"></figure><p>否则就在memory bank中新建一组高斯</p><h4 id="_3-3-3d-segmentation-rendering-and-downstream-application" tabindex="-1">3.3 3D Segmentation Rendering and Downstream Application. <a class="header-anchor" href="#_3-3-3d-segmentation-rendering-and-downstream-application" aria-label="Permalink to &quot;3.3 3D Segmentation Rendering and Downstream Application.&quot;">​</a></h4><p>这个地方有点神奇，理论上通过上述步骤已经将所有高斯分好组了，memory bank里的N组高斯就是N个物体，但是这篇文章不忘初心，认为上述过程其实和Gaussian Grouping一样得到了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">K</span></span></span></span>个身份，每个掩码m都有所属的身份，重新用Gaussian Grouping的训练流程对3DGS进行身份编码的训练。</p><blockquote><p>可以认为是通过上述过程选中的3D高斯还是不够准确，但是不同视角下的2D掩码已经得到统一了，可以认为是一个比视频跟踪得到的身份id更加准确的真值，因此用他们进行无监督的训练得到身份编码，再根据身份编码进行分组更加准确</p><p>也就是，上述过程的3D还是不好，但是2D足够好了，不如用2D作为监督，让3D进行无监督训练来自行分类</p></blockquote><p>总之，这份工作主要是代替了Gaussian Grouping中视频跟踪获得mask的方法，也就是完成了“将不同视角下的mask对应起来，得到一组统一的身份分类<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">K</span></span></span></span>”的过程。因此实验部分大部分 follow Gaussian Grouping。</p><h2 id="language-embedded-3d-gaussians-for-open-vocabulary-scene-understanding" tabindex="-1">Language Embedded 3D Gaussians for Open-Vocabulary Scene Understanding <a class="header-anchor" href="#language-embedded-3d-gaussians-for-open-vocabulary-scene-understanding" aria-label="Permalink to &quot;Language Embedded 3D Gaussians for Open-Vocabulary Scene Understanding&quot;">​</a></h2><p>2024 cvpr <a href="https://buaavrcg.github.io/LEGaussians/" target="_blank" rel="noreferrer">https://buaavrcg.github.io/LEGaussians/</a></p><h3 id="motivation-4" tabindex="-1">motivation <a class="header-anchor" href="#motivation-4" aria-label="Permalink to &quot;motivation&quot;">​</a></h3><p>关于语义嵌入带来的内存和速度问题，本文提出的解决方案</p><ul><li>采用特征量化方法</li><li>降低语义特征的空间频率，解决了多视角图像带来的语义模糊问题（由学习到的不确定性值引导）</li></ul><h3 id="method-4" tabindex="-1">method <a class="header-anchor" href="#method-4" aria-label="Permalink to &quot;method&quot;">​</a></h3><h4 id="_3-2-dense-language-feature-extraction" tabindex="-1">3.2. Dense Language Feature Extraction <a class="header-anchor" href="#_3-2-dense-language-feature-extraction" aria-label="Permalink to &quot;3.2. Dense Language Feature Extraction&quot;">​</a></h4><p>原始的CLIP模型是对象级的，要进行语义蒸馏就需要用pixel-level的CLIP特征，LERF使用多尺度密集CLIP特征来解决这一问题，本文采用类似3DOVS的分层随机裁剪技术来提取CLIP特征。</p><p>本文还提取了DINO的特征作为补充。最后将密集CLIP特征和DINO特征连接起来，形成混合语言特征图。即：</p><figure><img src="data:image/png;base64,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" alt="image-20240626192403783" loading="lazy" decoding="async"></figure><h4 id="_3-3-quantization-of-language-features" tabindex="-1">3.3. Quantization of Language Features <a class="header-anchor" href="#_3-3-quantization-of-language-features" aria-label="Permalink to &quot;3.3. Quantization of Language Features&quot;">​</a></h4><p>TODO：看不懂了以后再说</p><p>总之也是一种降维，但是不是把256-&gt;16,而是将连续空间转换为N个d维向量表示，即离散化来降低维度</p><h2 id="langsplat-3d-language-gaussian-splatting" tabindex="-1">LangSplat: 3D Language Gaussian Splatting <a class="header-anchor" href="#langsplat-3d-language-gaussian-splatting" aria-label="Permalink to &quot;LangSplat: 3D Language Gaussian Splatting&quot;">​</a></h2><p>2024 CVPR Highlight</p><p><a href="https://langsplat.github.io/" target="_blank" rel="noreferrer">https://langsplat.github.io/</a></p><figure><img src="/ayene-no-blog/assets/image-20240628144347211.DOEFfWJf.png" alt="image-20240628144347211" loading="lazy" decoding="async"></figure><p>简单过一遍管线：</p><p>先将图片过SAM得到M个mask，mask盖住原始图像，提取每个mask对应物体的CLIP特征，再训练一个编码-解码器，将CLIP特征通过Encoder降维给GS训练，GS阿尔法合成出特征升维来进行查询。</p><p>关于motivation</p><ul><li>使用SAM：因为CLIP提取的是图像级语义，这里需要像素级语义</li><li>使用编码解码器：内存、速度</li></ul><h2 id="feature-3dgs-supercharging-3d-gaussian-splatting-to-enable-distilled-feature-fields" tabindex="-1">Feature 3DGS: Supercharging 3D Gaussian Splatting to Enable Distilled Feature Fields <a class="header-anchor" href="#feature-3dgs-supercharging-3d-gaussian-splatting-to-enable-distilled-feature-fields" aria-label="Permalink to &quot;Feature 3DGS: Supercharging 3D Gaussian Splatting to Enable Distilled Feature Fields&quot;">​</a></h2><p>2024 CVPR Highlight</p><figure><img src="/ayene-no-blog/assets/image-20240628155159457.D1zJM8Yv.png" alt="image-20240628155159457" loading="lazy" decoding="async"></figure><p>很常见的方法，这里高斯嵌入低维向量，通过卷积上采样回高维</p><p>pix-level特征采用Lseg而不是CLIP原始特征，还尝试了SAM特征</p><h2 id="clip-gs-clip-informed-gaussian-splatting-for-real-time-and-view-consistent3d-semantic-understanding" tabindex="-1">CLIP-GS: CLIP-INFORMED GAUSSIAN SPLATTING FOR REAL-TIME AND VIEW-CONSISTENT3D SEMANTIC UNDERSTANDING <a class="header-anchor" href="#clip-gs-clip-informed-gaussian-splatting-for-real-time-and-view-consistent3d-semantic-understanding" aria-label="Permalink to &quot;CLIP-GS: CLIP-INFORMED GAUSSIAN SPLATTING FOR REAL-TIME AND VIEW-CONSISTENT3D SEMANTIC UNDERSTANDING&quot;">​</a></h2><p>ECCV格式，还没中</p><figure><img src="/ayene-no-blog/assets/image-20240628162130770.DQMm7c1U.png" alt="image-20240628162130770" loading="lazy" decoding="async"></figure><p>Phase I还是比较常见的，将CLIP特征通过SAM得到池化特征用以训练，</p><p>Phase II是将不同视角下的CLIP特征进行统一，通过视频跟踪模型标记SAM掩码的一致性，然后通过多数原则来选择相同物体的不同视角CLIP特征中最具有代表性的。</p><p>warm-up时用Phase I，之后用Phase II</p><figure><img src="/ayene-no-blog/assets/image-20240628173512496.C-jLvRwu.png" alt="image-20240628173512496" loading="lazy" decoding="async"></figure><h2 id="semantic-gaussians-open-vocabulary-scene-understanding-with-3d-gaussian-splatting" tabindex="-1">Semantic Gaussians: Open-Vocabulary Scene Understanding with 3D Gaussian Splatting <a class="header-anchor" href="#semantic-gaussians-open-vocabulary-scene-understanding-with-3d-gaussian-splatting" aria-label="Permalink to &quot;Semantic Gaussians: Open-Vocabulary Scene Understanding with 3D Gaussian Splatting&quot;">​</a></h2><h3 id="motivation-5" tabindex="-1">motivation <a class="header-anchor" href="#motivation-5" aria-label="Permalink to &quot;motivation&quot;">​</a></h3><p>核心思想：将预训练的2D编码器的知识提炼到3D高斯中，从而为每个高斯点分配语义成分。为了实现这一目标，我们<strong>建立了2D像素和3D高斯点之间的对应关系</strong>，并提出了一个多功能投影框架，将2D像素的语义特征映射到每个3D高斯点上。无需额外训练即可将语义成分注入3D高斯中，从而实现高效的开放词汇场景查询。</p><p>除了投影外，我们还引入了一个3D语义网络，可以直接从原始3D高斯中预测开放词汇语义成分。具体来说，我们采用MinkowskiNet [5]，一种3D稀疏卷积网络来处理3D高斯。3D卷积网络以原始RGB高斯为输入，并<strong>通过上述投影方法获得的高斯语义成分进行监督</strong>。因此，我们只需运行该网络即可获得语义成分，从而加快推理速度。值得注意的是，3D语义网络的预测可以与投影特征结合，以进一步提高高斯语义成分的质量和开放词汇场景理解性能。</p><h3 id="method-5" tabindex="-1">method <a class="header-anchor" href="#method-5" aria-label="Permalink to &quot;method&quot;">​</a></h3><figure><img src="/ayene-no-blog/assets/image-20240702143111996.Cyd0sLP8.png" alt="image-20240702143111996" loading="lazy" decoding="async"></figure><h4 id="_3-1-2d-versatile-projection" tabindex="-1">3.1 2D Versatile Projection <a class="header-anchor" href="#_3-1-2d-versatile-projection" aria-label="Permalink to &quot;3.1 2D Versatile Projection&quot;">​</a></h4><p>本节讲如何统一不同2D模型的特征（都成为pix-level的特征），以及如何将2D特征投影到3D</p><ul><li>像素级模型：使用SAM池化再分配回像素</li><li>实例级模型：识别出目标box后，将box作为提示输入SAM，得到比box更精确的分割掩码，再将CLIP（为什么指明是CLIP而不是任意实例模型？）特征分配给实例区域的所有像素</li><li>图像级模型：用SAM作为预处理获得不同的mask，将mask对应的region修补成224x224送入image-level的模型，再分配给所有像素</li></ul><p>将2D投影到3D：</p><p>先将像素通过相机内外参转换为一条3D空间中的光线，选中透明度不超过x%的前面的点，将2D语义分配给该高斯，若有多个2D语义则做平均池化</p><h4 id="_3-2-3d-semantic-network" tabindex="-1">3.2 3D Semantic Network <a class="header-anchor" href="#_3-2-3d-semantic-network" aria-label="Permalink to &quot;3.2 3D Semantic Network&quot;">​</a></h4><p>使用MinkowskiNet三维稀疏卷积网络<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>f</mi><mrow><mn>3</mn><mi>d</mi></mrow></msup></mrow><annotation encoding="application/x-tex">f^{3d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0435em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span>，将所有高斯送入，得到每个点的特征<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mrow><mn>3</mn><mi>D</mi></mrow></msup></mrow><annotation encoding="application/x-tex">s^{3D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8413em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mathnormal mtight" style="margin-right:.02778em">D</span></span></span></span></span></span></span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>s</mi><mrow><mn>3</mn><mi>D</mi></mrow></msup><mo>=</mo><msup><mi>f</mi><mrow><mn>3</mn><mi>D</mi></mrow></msup><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">s^{3D}=f^{3D}(G)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8913em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8913em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mathnormal mtight" style="margin-right:.02778em">D</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8913em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mathnormal mtight" style="margin-right:.02778em">D</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mclose">)</span></span></span></span></span></p><p>3.1已经让每个高斯点得到2D模型中的语义，于是每个高斯上有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mrow><mn>2</mn><mi>D</mi></mrow></msup></mrow><annotation encoding="application/x-tex">s^{2D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8413em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:.02778em">D</span></span></span></span></span></span></span></span></span></span></span></span>,3D网络的损失如下：</p><figure><img src="data:image/png;base64,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" alt="image-20240702152132708" loading="lazy" decoding="async"></figure><p>尽管监督完全来自2D模型，实验表明这样预测出的特征可以补充二维特征</p><h4 id="_3-3-inference" tabindex="-1">3.3 Inference <a class="header-anchor" href="#_3-3-inference" aria-label="Permalink to &quot;3.3 Inference&quot;">​</a></h4><p>对于N个文本提示，通过CLIP编码成<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>t</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>t</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">t_1,t_2,...,t_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8095em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.10903em">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>​,，每个高斯与文本列表逐个进行余弦相似度对比，得到n个相似度查询分数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>c</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">c_1,...,c_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>,通过softmax选择最高相似度的分类。前文提到有2D特征和3D特征，选择分数更高的</p><figure><img src="/ayene-no-blog/assets/image-20240702154449216.CT1GeOBB.png" alt="image-20240702154449216" loading="lazy" decoding="async"></figure><h3 id="experiments-3" tabindex="-1">Experiments <a class="header-anchor" href="#experiments-3" aria-label="Permalink to &quot;Experiments&quot;">​</a></h3><p>使用2D-3D联合能在<strong>2D分割任务</strong>上有提升</p><figure><img src="/ayene-no-blog/assets/image-20240702154805307.CAhSvBMp.png" alt="image-20240702154805307" loading="lazy" decoding="async"></figure><p>给点云特征提取网络输入位置以外的信息在2D分割任务有提升</p><figure><img src="/ayene-no-blog/assets/image-20240702155221182.BI3L9Ihb.png" alt="image-20240702155221182" loading="lazy" decoding="async"></figure><p>换成VLpart提取特征能完成part segment</p><figure><img src="/ayene-no-blog/assets/image-20240702155740398.Be4hTiKH.png" alt="image-20240702155740398" loading="lazy" decoding="async"></figure><!--]--><!--]--><!----><!----></article><!-- </Transition> --><!--]--><!--[--><!--[--><!--[--><!----><ul class="post-copyright" m="y-4"><li class="post-copyright-author"><strong>本文作者：</strong><span>水沢绫音</span></li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://pat-chou-li.github.io/ayene-no-blog/posts/%E5%88%86%E5%89%B2%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E6%95%B4%E7%90%86" target="_blank" title="本文链接">https://pat-chou-li.github.io/ayene-no-blog/posts/分割论文阅读整理</a></li><li class="post-copyright-license"><strong>版权声明：</strong><span>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 ">CC BY-NC-SA</a> 许可协议。</span></li></ul><!--]--><!--]--><!--]--></div><!--]--><!----></div><!--[--><!--]--><!--[--><div class="post-nav"><div class="post-nav-item"><a href="/ayene-no-blog/posts/%E5%88%86%E5%89%B2%E6%80%BB%E7%BB%93" class="post-nav-prev" title="分割总结"><div class="icon" i-ri-arrow-left-s-line></div><span class="title truncate" text="sm">分割总结</span></a></div><div class="post-nav-item"><a href="/ayene-no-blog/posts/%E5%88%86%E5%89%B2%E8%AE%BA%E6%96%87%E5%A4%8D%E7%8E%B0%E8%AE%B0%E5%BD%95" class="post-nav-next" title="分割论文复现记录"><span class="title truncate" text="sm">分割论文复现记录</span><div class="icon" i-ri-arrow-right-s-line></div></a></div></div><!--]--><!--[--><!--]--><!----><!--[--><!-- eslint-disable-next-line vue/no-lone-template empty --><template class="mt-4"></template><!--]--><!--[--><!--]--><!--[--><!--]--></div><!--]--></main><!--[--><button class="xl:hidden toc-btn shadow-md fixed yun-icon-btn z-20 bg-$va-c-bg-soft" opacity="75" right="4" bottom="19"><div i-ri-file-list-line></div></button><!----><aside flex="~ col" class="va-card yun-aside sticky top-0 lg:top-$yun-margin-top min-h-sm" text="center" overflow="auto"><div class="w-full" flex="~ col" pb-2 style="display:none"><!--[--><h2 m="t-6 b-2" font="serif black">文章目录</h2><div style="display:none" data-v-6dc67c73><div class="content" data-v-6dc67c73><div class="outline-title" data-v-6dc67c73>本页</div><div class="outline-marker" data-v-6dc67c73></div><nav aria-labelledby="doc-outline-aria-label" data-v-6dc67c73><span id="doc-outline-aria-label" class="visually-hidden" data-v-6dc67c73>Table of Contents for current page</span><ul class="root va-toc relative z-1 css-i18n-toc" data-v-6dc67c73 data-v-699db71a><!--[--><!--]--></ul></nav></div></div><!--]--><div class="flex-grow"></div><!----></div></aside><!--]--><!--]--></div><footer flex="~ col" class="relative yun-footer va-footer px-4 py-4 pt-0 text-$va-c-text-light w-full mt-14" bg="white dark:$va-c-bg-soft" text="center sm"><div class="yun-cloud absolute top--10 left-0 right-0"><svg class="waves" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" fill="var(--yun-c-cloud)"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><!----><div class="copyright flex justify-center items-center gap-2" p="1"><span>©<!--[--> 2022 -<!--]--> 2025</span><a class="animate-pulse inline-flex" href="https://www.yunyoujun.cn/sponsors/" target="_blank" title="Sponsor YunYouJun"><div class="i-ri-cloud-line"></div></a><span>水沢绫音</span></div><div class="powered" m="2"><span>由 <a href="git+https://github.com/YunYouJun/valaxy.git" target="_blank" rel="noopener">Valaxy</a> <span class="op-60">v0.26.10</span> 驱动</span><span mx-1>|</span><span><span>主题</span><span mx-1>-</span><a href="git+https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-theme-yun.git" title="valaxy-theme-yun" target="_blank">Yun</a><span class="ml-1 op-60">v0.26.10</span></span></div><!--[--><!--]--><div class="yun-footer-gradient" style="--gradient-from:161 196 253;--gradient-to:194 233 251"></div></footer><!--]--><!--]--></div><script>window.__INITIAL_STATE__='{"pinia":{"yun-app":{},"app":{"showLoading":true},"site":{},"routerStore":{}}}'</script><script type="application/ld+json" data-hid="schema-org-graph">{"@context":"https://schema.org","@graph":[{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#identity","@type":"Person","name":"水沢绫音","url":"https://pat-chou-li.github.io/ayene-no-blog/","image":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/image/658d95f"},"sameAs":["/atom.xml","https://github.com/pat-chou-li","https://www.zhihu.com/people/shui-ze-ling-yin-46","https://space.bilibili.com/8929945?spm_id_from=333.1007.0.0","patchouli13@163.com"]},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#website","@type":"WebSite","dateModified":"2024.6.20","datePublished":"2024.6.20","inLanguage":"en","name":"分割论文阅读整理","url":"https://pat-chou-li.github.io/ayene-no-blog/","publisher":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#identity"}},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#webpage","@type":"WebPage","dateModified":"2024-06-20T00:00:00.000Z","datePublished":"2024-06-20T00:00:00.000Z","description":"我从来没有觉得学图形学开心过。","name":"分割论文阅读整理","url":"https://pat-chou-li.github.io/ayene-no-blog/","about":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#identity"},"isPartOf":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#website"},"potentialAction":[{"@type":"ReadAction","target":["https://pat-chou-li.github.io/ayene-no-blog/"]}]},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#article","dateModified":"2024-06-20T00:00:00.000Z","datePublished":"2024-06-20T00:00:00.000Z","description":"我从来没有觉得学图形学开心过。","headline":"分割论文阅读整理","inLanguage":"en","thumbnailUrl":"https://pat-chou-li.github.io/ayene-no-blog/favicon.svg","@type":["Article","BlogPosting"],"author":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/person/6678b6b"},"image":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/image/19d7713"},"isPartOf":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#webpage"},"mainEntityOfPage":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#webpage"},"publisher":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#identity"}},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/person/6678b6b","@type":"Person","name":"水沢绫音","url":"https://valaxy.site"},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/image/658d95f","@type":"ImageObject","contentUrl":"https://raw.githubusercontent.com/pat-chou-li/ayene-no-blog/main/resource/avatar.jpg","inLanguage":"en","url":"https://raw.githubusercontent.com/pat-chou-li/ayene-no-blog/main/resource/avatar.jpg"},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/image/19d7713","@type":"ImageObject","contentUrl":"https://pat-chou-li.github.io/ayene-no-blog/favicon.svg","inLanguage":"en","url":"https://pat-chou-li.github.io/ayene-no-blog/favicon.svg"}]}</script></body></html>