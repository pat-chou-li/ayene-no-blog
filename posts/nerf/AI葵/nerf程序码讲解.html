<!DOCTYPE html><html lang="en" data-beasties-container><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg"><script>!function(){const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><style type="text/css">:root{color-scheme:light dark;--va-c-bg:#fff}html{background-color:var(--va-c-bg)}</style><script>const locale=localStorage.getItem("valaxy-locale")||"zh-CN";document.documentElement.setAttribute("lang",locale)</script><script type="module" async crossorigin src="/ayene-no-blog/assets/app.5Pc5wqE0.js"></script><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/framework.BWK1Zvdg.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/@vueuse/motion.CDGXpttC.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/vue-router.DlUPz4t8.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/dayjs.BldX5ftQ.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/vue-i18n.lF0SUo7_.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/pinia.BYsrTFz1.js"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/chunks/nprogress.DxEoPAls.js"><link rel="stylesheet" crossorigin href="/ayene-no-blog/assets/app.B3NQSKti.css"><link rel="stylesheet" crossorigin href="/ayene-no-blog/assets/group-icons.CNuSYZDE.css"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/post.BIZmRJsi.js"><link rel="stylesheet" href="/ayene-no-blog/assets/group-icons.CNuSYZDE.css"><link rel="modulepreload" crossorigin href="/ayene-no-blog/assets/nerf程序码讲解.C6kLOAF6.js"><title>nerf程序码讲解（AI葵） - ayane no blog</title><script id="check-mac-os" async>document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap"><meta property="og:locale:alternate" content="en"><meta name="description" content="我从来没有觉得学图形学开心过。"><meta property="og:description" content="我从来没有觉得学图形学开心过。"><meta property="og:locale" content="zh-CN"><meta property="og:site_name" content="ayane no blog"><meta property="og:title" content="nerf程序码讲解（AI葵）"><meta property="og:image" content="/favicon.svg"><meta property="og:type" content="website"><meta property="og:url" content="https://pat-chou-li.github.io/ayene-no-blog/"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><meta name="generator" content="Valaxy 0.26.3"><meta name="theme-color" content="#fff"><meta name="msapplication-TileColor" content="#fff"><meta name="twitter:card" content="summary_large_image"></head><body><div id="app" data-server-rendered="true"><!--[--><!--[--><!--[--><!----><!----><div class="yun-page-header-gradient" style="--gradient-from:161 196 253;--gradient-to:194 233 251"></div><!----><!----><!----><canvas class="fireworks"></canvas><!--[--><div class="yun-bg"></div><!--]--><div class="yun-page-loading" absolute left-0 right-0 bottom-0 top-0 flex justify="center" items-center z-10 bg="$va-c-bg" data-v-673bc094><div class="spinner" data-v-673bc094></div></div><a href="#" class="back-to-top yun-icon-btn bg-$va-c-bg-soft shadow-md"><div class="size-8" i-ri-arrow-up-s-line></div><svg class="progress-circle-container" viewBox="0 0 100 100"><circle stroke-dasharray="301.59289474462014 301.59289474462014" stroke-dashoffset="301.59289474462014" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="progress-circle" cx="50" cy="50" r="48" fill="none"/></svg></a><!-- TODO --><!-- <YunDock /> --><!--]--><!--[--><!--]--><!----><!--]--><!--[--><div flex="~" class="w-full m-auto justify-center items-start gap-4 mt-12 md:mt-24"><!--[--><!----><main class="yun-main lt-md:w-full" flex="~ center"><!--[--><div class="content w-full md:w-3xl lg:w-2xl xl:w-2xl 2xl:w-4xl" flex="~ col grow" p="lt-md:0"><div class="yun-card flex-center rounded-2 relative" flex="col" min-h="100px" bg="$va-c-bg-light" m="0" style><!----><!----><!--[--><div class="mt-8 mb-4"><!--[--><header class="post-header"><h1 p="2" text="2xl center" font="serif black" style="" class="post-title flex-center"><!----><span inline-flex class="leading-none">nerf程序码讲解（AI葵）</span></h1></header><!--]--></div><!--[--><!--[--><!--[--><!--[--><!----><!----><!----><div flex="~ center" text="sm" class="flex-col gap-2! post-meta gap-4"><div class="post-time flex items-center gap-4"><span class="posted-time inline-flex-center gap-1" title="发表于2023-10-19 00:00:00"><div class="inline-block" i-ri-calendar-line></div><time class="op-80">2023-10-19</time></span><span class="edited-time inline-flex-center gap-1" title="更新于2025-08-22 09:02:38"><div i-ri-calendar-2-line></div><time class="op-80">2025-08-22</time></span></div><!--[--><!--]--><div class="inline-flex-center gap-4"><!----><!----></div></div><!--]--><div class="inline-flex mt-2" text="sm" py="1"><a href="/ayene-no-blog/categories?category=NeRF" class="transition post-category inline-flex-center text-xs border-$va-c-divider" px-2 h="7" border rounded-full hover="bg-blue-500 text-white"><div m="x-1" inline-flex i-ri-folder-2-line></div><span>NeRF</span></a><span mx="2"></span><div class="post-tags inline-flex" items="center" gap="1" flex="wrap 1" justify="end"><!--[--><a href="/ayene-no-blog/tags/?tag=%E5%9B%BE%E5%BD%A2%E5%AD%A6" class="transition post-tag inline-flex-center text-xs border-$va-c-divider" px-2 h="7" rounded-full border hover="bg-blue-500 text-white"><span>图形学</span></a><a href="/ayene-no-blog/tags/?tag=NeRF" class="transition post-tag inline-flex-center text-xs border-$va-c-divider" px-2 h="7" rounded-full border hover="bg-blue-500 text-white"><span>NeRF</span></a><!--]--></div></div><!--]--><!--]--><!--]--><div p="x-4 b-8" class="sm:px-6 lg:px-12 xl:px-16" w="full"><!--[--><!--]--><!--[--><!-- <Transition appear> --><article class="markdown-body"><!--[--><!----><!----><!--[--><!--]--><!--[--><h5 id="dataset" tabindex="-1">dataset <a class="header-anchor" href="#dataset" aria-label="Permalink to &quot;dataset&quot;">​</a></h5><p>现实图片的数据集可以通过colmap重建出位姿，存储在poses_bounds中</p><p>对于模型，blender也可以生成多视角图片</p><h5 id="输入的图片" tabindex="-1">输入的图片 <a class="header-anchor" href="#输入的图片" aria-label="Permalink to &quot;输入的图片&quot;">​</a></h5><p>每一张图片都有对应的相机内外参，每一个像素都可以通过矩阵变换得到一个rays，作为训练时input的射线</p><p>而每一个像素本身的rgb则可以作为loss</p><h5 id="实际的体渲染" tabindex="-1">实际的体渲染 <a class="header-anchor" href="#实际的体渲染" aria-label="Permalink to &quot;实际的体渲染&quot;">​</a></h5><p>论文中的公式（3）</p><p>α为不透明度，<img src="data:image/png;base64,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" alt="image-20231028165835408">为步长，<img src="data:image/png;base64,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" alt="image-20231028165846641">为密度，很显然步长越长，密度越高，权重应该越高</p><p>举例<img src="/ayene-no-blog/assets/image-20231028170238227.D4hXjYBm.png" alt="image-20231028170238227">，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>α</mi><mn>2</mn></msub><mtext>是第二个点的不透明度，</mtext><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>α</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mtext>表示经过了前面的点还剩下多少“权重”能够到达这里</mtext></mrow><annotation encoding="application/x-tex">\alpha_2是第二个点的不透明度，(1-α_1)表示经过了前面的点还剩下多少“权重”能够到达这里</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.0037em">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:-.0037em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord cjk_fallback">是第二个点的不透明度，</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.0037em">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:-.0037em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord cjk_fallback">表示经过了前面的点还剩下多少</span><span class="mord">“</span><span class="mord cjk_fallback">权重</span><span class="mord">”</span><span class="mord cjk_fallback">能够到达这里</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>α</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>α</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mtext>其实就是透射率</mtext><mi>T</mi></mrow><annotation encoding="application/x-tex">\alpha_2(1-α_1)其实就是透射率T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.0037em">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:-.0037em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.0037em">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:-.0037em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord cjk_fallback">其实就是透射率</span><span class="mord mathnormal" style="margin-right:.13889em">T</span></span></span></span></p><p>总之权重和自身的透明度有关，还和遮挡这一点的其他采样点的透明度有关</p><figure><img src="/ayene-no-blog/assets/image-20231028165759330.DLk2i2NW.png" alt="image-20231028165759330" loading="lazy" decoding="async"></figure><h4 id="精细采样的实现" tabindex="-1">精细采样的实现 <a class="header-anchor" href="#精细采样的实现" aria-label="Permalink to &quot;精细采样的实现&quot;">​</a></h4><figure><img src="/ayene-no-blog/assets/image-20231028185639208.DxX-ztB_.png" alt="image-20231028185639208" loading="lazy" decoding="async"></figure><p>得到一个从n到f的权重累积函数，最大是1，然后在y轴等距离采样，比较陡峭的地方（weight变化大）的地方就会被比较多的采样</p><!--]--><!--]--><!----><!----></article><!-- </Transition> --><!--]--><!--[--><!--[--><!--[--><!----><ul class="post-copyright" m="y-4"><li class="post-copyright-author"><strong>本文作者：</strong><span>水沢绫音</span></li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://pat-chou-li.github.io/ayene-no-blog/posts/nerf/AI葵/nerf程序码讲解" target="_blank" title="本文链接">https://pat-chou-li.github.io/ayene-no-blog/posts/nerf/AI葵/nerf程序码讲解</a></li><li class="post-copyright-license"><strong>版权声明：</strong><span>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 ">CC BY-NC-SA</a> 许可协议。</span></li></ul><!--]--><!--]--><!--]--></div><!--]--><!----></div><!--[--><!--]--><!--[--><div class="post-nav"><div class="post-nav-item"><a href="/ayene-no-blog/posts/nerf/AI葵/nerf与它的快乐伙伴们" class="post-nav-prev" title="nerf和他的快乐伙伴们（AI葵）"><div class="icon" i-ri-arrow-left-s-line></div><span class="title truncate" text="sm">nerf和他的快乐伙伴们（AI葵）</span></a></div><div class="post-nav-item"><a href="/ayene-no-blog/posts/cg/srp" class="post-nav-next" title="SRP"><span class="title truncate" text="sm">SRP</span><div class="icon" i-ri-arrow-right-s-line></div></a></div></div><!--]--><!--[--><!--]--><!----><!--[--><!-- eslint-disable-next-line vue/no-lone-template empty --><template class="mt-4"></template><!--]--><!--[--><!--]--><!--[--><!--]--></div><!--]--></main><!--[--><button class="xl:hidden toc-btn shadow-md fixed yun-icon-btn z-20 bg-$va-c-bg-soft" opacity="75" right="4" bottom="19"><div i-ri-file-list-line></div></button><!----><aside flex="~ col" class="va-card yun-aside sticky top-0 lg:top-$yun-margin-top min-h-sm" text="center" overflow="auto"><div style="display:none" class="w-full" flex="~ col" pb-2><!--[--><h2 m="t-6 b-2" font="serif black">文章目录</h2><div style="display:none" data-v-6dc67c73><div class="content" data-v-6dc67c73><div class="outline-title" data-v-6dc67c73>本页</div><div class="outline-marker" data-v-6dc67c73></div><nav aria-labelledby="doc-outline-aria-label" data-v-6dc67c73><span id="doc-outline-aria-label" class="visually-hidden" data-v-6dc67c73>Table of Contents for current page</span><ul class="root va-toc relative z-1 css-i18n-toc" data-v-6dc67c73 data-v-699db71a><!--[--><!--]--></ul></nav></div></div><!--]--><div class="flex-grow"></div><!----></div></aside><!--]--><!--]--></div><footer flex="~ col" class="relative yun-footer va-footer px-4 py-4 pt-0 text-$va-c-text-light w-full mt-14" bg="white dark:$va-c-bg-soft" text="center sm"><div class="yun-cloud absolute top--10 left-0 right-0"><svg class="waves" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" fill="var(--yun-c-cloud)"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><!----><div class="copyright flex justify-center items-center gap-2" p="1"><span>©<!--[--> 2022 -<!--]--> 2025</span><a class="animate-pulse inline-flex" href="https://www.yunyoujun.cn/sponsors/" target="_blank" title="Sponsor YunYouJun"><div class="i-ri-cloud-line"></div></a><span>水沢绫音</span></div><div class="powered" m="2"><span>由 <a href="git+https://github.com/YunYouJun/valaxy.git" target="_blank" rel="noopener">Valaxy</a> <span class="op-60">v0.26.3</span> 驱动</span><span mx-1>|</span><span><span>主题</span><span mx-1>-</span><a href="git+https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-theme-yun.git" title="valaxy-theme-yun" target="_blank">Yun</a><span class="ml-1 op-60">v0.26.3</span></span></div><!--[--><!--]--><div class="yun-footer-gradient" style="--gradient-from:161 196 253;--gradient-to:194 233 251"></div></footer><!--]--><!--]--></div><script>window.__INITIAL_STATE__='{"pinia":{"yun-app":{},"app":{"showLoading":true},"site":{},"routerStore":{}}}'</script><script type="application/ld+json" data-hid="schema-org-graph">{"@context":"https://schema.org","@graph":[{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#identity","@type":"Person","name":"水沢绫音","url":"https://pat-chou-li.github.io/ayene-no-blog/","image":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/image/658d95f"},"sameAs":["/atom.xml","https://github.com/pat-chou-li","https://www.zhihu.com/people/shui-ze-ling-yin-46","https://space.bilibili.com/8929945?spm_id_from=333.1007.0.0","patchouli13@163.com"]},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#website","@type":"WebSite","dateModified":"2025-08-22T09:02:38.772Z","datePublished":"2023.10.19","inLanguage":"en","name":"nerf程序码讲解（AI葵）","url":"https://pat-chou-li.github.io/ayene-no-blog/","publisher":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#identity"}},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#webpage","@type":"WebPage","dateModified":"2025-08-22T09:02:38.772Z","datePublished":"2023-10-19T00:00:00.000Z","description":"我从来没有觉得学图形学开心过。","name":"nerf程序码讲解（AI葵）","url":"https://pat-chou-li.github.io/ayene-no-blog/","about":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#identity"},"isPartOf":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#website"},"potentialAction":[{"@type":"ReadAction","target":["https://pat-chou-li.github.io/ayene-no-blog/"]}]},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#article","dateModified":"2025-08-22T09:02:38.772Z","datePublished":"2023-10-19T00:00:00.000Z","description":"我从来没有觉得学图形学开心过。","headline":"nerf程序码讲解（AI葵）","inLanguage":"en","thumbnailUrl":"https://pat-chou-li.github.io/ayene-no-blog/favicon.svg","@type":["Article","BlogPosting"],"author":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/person/6678b6b"},"image":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/image/19d7713"},"isPartOf":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#webpage"},"mainEntityOfPage":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#webpage"},"publisher":{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#identity"}},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/person/6678b6b","@type":"Person","name":"水沢绫音","url":"https://valaxy.site"},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/image/658d95f","@type":"ImageObject","contentUrl":"https://raw.githubusercontent.com/pat-chou-li/ayene-no-blog/main/resource/avatar.jpg","inLanguage":"en","url":"https://raw.githubusercontent.com/pat-chou-li/ayene-no-blog/main/resource/avatar.jpg"},{"@id":"https://pat-chou-li.github.io/ayene-no-blog/#/schema/image/19d7713","@type":"ImageObject","contentUrl":"https://pat-chou-li.github.io/ayene-no-blog/favicon.svg","inLanguage":"en","url":"https://pat-chou-li.github.io/ayene-no-blog/favicon.svg"}]}</script></body></html>